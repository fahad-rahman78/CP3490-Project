<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<!--
This is the comprehensive layout for the Admin Dashboard.
It uses a TabPane to organize Events, Users, Rooms, and Analytics features.
Linked to com.eventsystem.controller.AdminDashboardController.
-->
<VBox xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/21"
      fx:controller="com.eventsystem.controller.AdminDashboardController"
      spacing="10" style="-fx-padding: 15; -fx-background-color: #e0e0e0; -fx-pref-width: 800; -fx-pref-height: 600;">

    <!-- Header Section -->
    <HBox alignment="CENTER_LEFT" spacing="20">
        <Label fx:id="welcomeLabel" text="Admin Dashboard" textFill="#333333">
            <font>
                <Font name="System Bold" size="24.0" />
            </font>
        </Label>
        <!-- Pushes the logout button to the right -->
        <HBox HBox.hgrow="ALWAYS" alignment="CENTER_RIGHT">
            <Button fx:id="logoutButton" text="Logout" onAction="#onLogoutButtonClick"
                    style="-fx-background-color: #6c757d; -fx-text-fill: white;"/>
        </HBox>
    </HBox>

    <!-- Main Content: Tabs for each feature set -->
    <TabPane VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE">

        <!-- TAB 1: EVENT MANAGEMENT (Search, View, Report, Export) -->
        <Tab text="Event Management">
            <VBox spacing="10" style="-fx-padding: 10;">
                <!-- Search Bar -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Search Events:" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="searchField" promptText="Type to filter by title or organizer..." HBox.hgrow="ALWAYS"/>
                </HBox>

                <!-- Event List -->
                <ListView fx:id="eventListView" VBox.vgrow="ALWAYS" />

                <!-- Action Buttons -->
                <HBox spacing="10">
                    <Button text="Generate Report" onAction="#onGenerateReportClick"
                            style="-fx-background-color: #007bff; -fx-text-fill: white;"/>
                    <Button text="Export to CSV" onAction="#onExportEventsClick"
                            style="-fx-background-color: #28a745; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
        </Tab>

        <!-- TAB 2: USER MANAGEMENT (View, Delete) -->
        <Tab text="User Management">
            <VBox spacing="10" style="-fx-padding: 10;">
                <Label text="Registered Users (Students &amp; Organizers):"/>
                <ListView fx:id="userListView" VBox.vgrow="ALWAYS" />
                <HBox spacing="10">
                    <Button text="Delete Selected User" onAction="#onDeleteUserClick"
                            style="-fx-background-color: #dc3545; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
        </Tab>

        <!-- TAB 3: ROOM MANAGEMENT (Add, View, Delete) -->
        <Tab text="Room Management">
            <VBox spacing="10" style="-fx-padding: 10;">
                <Label text="Campus Rooms:"/>
                <ListView fx:id="roomListView" VBox.vgrow="ALWAYS" />

                <!-- Add Room Form -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="roomNameField" promptText="Room Name" HBox.hgrow="ALWAYS"/>
                    <TextField fx:id="roomLocationField" promptText="Location" HBox.hgrow="ALWAYS"/>
                    <TextField fx:id="roomCapacityField" promptText="Capacity" prefWidth="80"/>
                    <Button text="Add Room" onAction="#onAddRoomClick"
                            style="-fx-background-color: #28a745; -fx-text-fill: white;"/>
                </HBox>
                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button text="Delete Selected Room" onAction="#onDeleteRoomClick"
                            style="-fx-background-color: #dc3545; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
        </Tab>

        <!-- TAB 4: ANALYTICS (Visual Charts) -->
        <Tab text="Analytics">
            <VBox spacing="20" style="-fx-padding: 20;" alignment="CENTER">
                <Label text="Event Status Overview" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                <PieChart fx:id="eventPieChart" title="Events by Status" />
                <Label fx:id="statsLabel" text="Loading stats..." style="-fx-font-size: 14px;"/>
            </VBox>
        </Tab>

    </TabPane>

    <!-- Global Message Label -->
    <Label fx:id="messageLabel" text="Ready." textFill="#555555"/>

</VBox>